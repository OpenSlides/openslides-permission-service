---
db:
  motion/1:
    submitter_ids: [1]
    state_id: 1
    meeting_id: 1
  motion_submitter/1/user_id: 1

action: motion.delete
payload:
  id: 1

cases:
- name: correct state
  db:
    motion_state/1/allow_submitter_edit: true
  user_id: 1
  is_allowed: true

- name: wrong state
  db:
    motion_state/1/allow_submitter_edit: false
  user_id: 1
  is_allowed: false

- name: manager
  user_id: 1
  db:
    motion_state/1/allow_submitter_edit: false
  permission: motion.can_manage
  is_allowed: true

- name: meta manager
  user_id: 1
  db:
    motion_state/1/allow_submitter_edit: false
  permission: motion.can_manage_metadata
  is_allowed: false

- name: manager other motion
  user_id: 2
  permission: motion.can_manage
  is_allowed: true